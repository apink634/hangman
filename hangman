import random 

Hangman_pics = {
    6: """
     ______
    |      |
    |
    |
    |
    |
    =========
    """,
    5: """
     ______
    |      |
    |      O
    |
    |
    |
    =========
    """,
    4: """
     ______
    |      |
    |      O
    |      |
    |
    |
    =========
    """,
    3: """
     ______
    |      |
    |      O
    |     /|
    |
    |
    =========
    """,
    2: """
     ______
    |      |
    |      O
    |     /|\\
    |
    |
    =========
    """,
    1: """
     ______
    |      |
    |      O
    |     /|\\
    |     /
    |
    =========
    """,
    0: """
     ______
    |      |
    |      O
    |     /|\\
    |     / \\
    |
    =========
    GAME OVER!
    """
}

#dictionary of categories, words, definitions
Word_categories = {
    "literature": [
        {"word": "Crime and Punishment", "definition": "A novel by Fyodor Dostoevsky about the psychological torment of Raskolnikov."},
        {"word": "The Yellow Wallpaper", "definition": "A short story by Charlotte Perkins Gilman exploring mental health and oppression."},
        {"word": "Dante's Inferno", "definition": "An epic poem by Dante Alighieri, written in the early 14th century."}
    ],
    "culture": [
        {"word": "Diwali", "definition": "A five-day Hindu festival of lights symbolizing the victory of good over evil."},
        {"word": "Christmas", "definition": "A Christian festival celebrating the birth of Jesus Christ."},
        {"word": "Carnival", "definition": "A festival before Lent with parades, costumes, and celebrations."}
    ],
    "history": [
        {"word": "pyramid", "definition": "A monumental structure from ancient Egypt."},
        {"word": "empire", "definition": "A group of states or countries under one ruler."},
        {"word": "revolution", "definition": "A dramatic and wide-reaching change."}
    ],
    "science": [
        {"word": "gravity", "definition": "The force that pulls objects toward Earth."},
        {"word": "atom", "definition": "The basic unit of a chemical element."},
        {"word": "energy", "definition": "The ability to do work."}
    ],
    "countries": [
        {"word": "canada", "definition": "A large country in North America."},
        {"word": "brazil", "definition": "The largest country in South America."},
        {"word": "japan", "definition": "An island country in East Asia."}
    ]
}

# teacher mode
def fill_category(item_choice):
    if item_choice not in Word_categories:
        print("Category doesn't exist.")
        return
    
    while True:
        new_word = input("Enter the NEW word/phrase: ")
        new_def = input("Enter the definition: ")
        Word_categories[item_choice].append({"word": new_word, "definition": new_def})

        print(f"\nAdded to '{item_choice}': {new_word} - {new_def}")

        userStopChoice = input("Want to add one more word? (yes/no): ").lower()
        if userStopChoice == "no":
            break

def teacher_mode():
    print("\n--- TEACHER MODE ---")
    print("1. Add a NEW category")
    print("2. Add a NEW word to an existing category")

    choice = input("Choose an option (1 or 2): ")

    # Create new category
    if choice == "1":
        new_category = input("Enter the NEW category name: ").lower()
        
        if new_category in Word_categories:
            print("This category already exists.")
        else:
            Word_categories[new_category] = []
            print(f"Category '{new_category}' created!")

        continue_choice = input("Want to add words to the category? (yes/no): ").lower()
        if continue_choice == "yes":
            fill_category(new_category)

    # Add to existing category
    elif choice == "2":
        print("\nAvailable categories:")
        for item in Word_categories:
            print("-", item.capitalize())

        item_choice = input("\nChoose a category to add a word to: ").lower()
        fill_category(item_choice)
    
    print("\nReturning to main menu...\n")
    main_menu()


# student mode
def choose_word(category):
    category = category.lower()
    if category in Word_categories:
        word_entry = random.choice(Word_categories[category])
        return word_entry["word"], word_entry["definition"]
    else:
        print("Invalid choice, random category selected.")
        rando = random.choice(list(Word_categories.keys()))
        word_entry = random.choice(Word_categories[rando])
        return word_entry["word"], word_entry["definition"]

def play_hangman():
    print("\nCategories:")
    for i in Word_categories.keys():
        print("_", i.capitalize())

    user_i = input("Choose a category: ")
    word, definition = choose_word(user_i)
    word = word.lower()

    lives = 6
    guessed_letters = []
    current_state = []

    for letter in word:
        if letter.isalpha():
            current_state.append("_")
        else:
            current_state.append(letter)

    # GAME LOOP
    while True:
        print(Hangman_pics[lives])
        print("Word:", " ".join(current_state))
        print("Guessed letters:", guessed_letters)

        guess = input("\nEnter a single letter: ").lower()

        if len(guess) != 1 or not guess.isalpha():
            print("Please enter exactly ONE letter.\n")
            continue
        if guess in guessed_letters:
            print("You already guessed that letter.\n")
            continue

        guessed_letters.append(guess)

        if guess in word:
            print("Correct!")
            for idx, letter in enumerate(word):
                if letter == guess:
                    current_state[idx] = guess

            if "_" not in current_state:
                print("\nYOU WIN!")
                print("The word was:", word)
                print("Definition:", definition)
                break
        else:
            print("Incorrect\n")
            lives -= 1
            if lives == 0:
                print(Hangman_pics[lives])
                print("You lost!")
                print("The word was:", word)
                print("Definition:", definition)
                break

    again = input("\nPlay again? (yes/no): ").lower()
    if again == "yes":
        play_hangman()
    else:
        print("\nReturning to main menu...\n")
        main_menu()


# main menu
def main_menu():
    print("\n===== HANGMAN PROGRAM =====")
    print("1. Student Mode (Play Game)")
    print("2. Teacher Mode (Add Categories & Words)")
    print("3. Quit")

    mode = input("Choose a mode (1/2/3): ")

    if mode == "1":
        play_hangman()
    elif mode == "2":
        teacher_mode()
    else:
        print("\nGoodbye!")

# Start program
main_menu()